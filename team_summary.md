# 小组成员任务总结

## ConnectC

### 任务内容概述
- 负责完成 Django 项目的整体框架，按照顾客、商家、平台、骑手四类角色划分应用，并在 `Project/urls.py` 中统一配置各端入口以保证路由清晰。
- 构建登录、注册、顾客、商家、骑手等各角色的模板与视图（如 `customer/templates/customer.html`、`rider/templates/rider.html`），实现下单、订单流转、入驻/签约申请等基础业务。
- 新增 `home` 应用，提供沉浸式的品牌主页（`home/templates/home.html`）和 `HomeView`/重定向逻辑，让系统在根路径就能向外展示产品定位。

### 任务难点与解决方法
- **多角色业务拆分**：顾客、商家、平台、骑手在数据与流程上高度耦合。通过设计 `login.models.UserProfile` 统一桥接各角色信息，并在每个 app 中封装独立的视图/模板，保证各端既共享认证体系又互不干扰。
- **大体量前端模板维护**：顾客、骑手页面包含大量筛选、表格、弹窗，需要确保交互一致。采用自定义组件化样式（统一的按钮、筛选区、卡片样式）并配合原生 JavaScript 管理数据面板，降低样式/脚本重复。
- **品牌主页体验**：主页需同时传达产品价值与引导登录。通过编写完全自定义的 CSS 动画和多 section 响应式布局，并在 `project/urls.py` 中把根路径指向 `HomeView`，实现即开即用的宣传页。

### 任务完成结果
- 项目具备完整的多角色业务流：用户注册后即可按照角色进入对应控制台，每个流程都在 URL 层面有明确入口。
- 根路径展示了 SpeedEats 品牌主页，包含导航、英雄区、优势说明、数据展示、合作流程等模块，显著提升了第一次访问的体验。

### 收获与体会
- 巩固了多 app Django 项目的分层思想，理解了如何用统一的用户模型衔接不同业务端。
- 在大体量静态页面的制作中积累了可复用 CSS/JS 模块的经验，也意识到早期规划交互结构的重要性。

## focalors

### 任务内容概述
- 把项目数据库切换到新的 1357 MySQL 实例（`Project/settings.py`），编写 `Project/db_utils.py` 统一封装 `execute_fetch*`/`execute_non_query`/`quote_table` 等函数，并在顾客、商家、平台、骑手视图中用原生 SQL 重写所有数据读写逻辑。
- 编写 `MODIFICATION_LOG.md` 记录迁移过程，确保后续成员能快速了解视图改写范围及通用工具的使用方式。
- 在订单生命周期中加入评分系统：增加 `OrderRating` 模型和各实体 `rating_score/rating_count` 字段、扩展顾客端模板与 JS 逻辑（`customer/templates/customer.html`）以及新增 `customer/views.rate_order` 等接口，让顾客完成订单后可以评价商家、餐品、平台和骑手。
- 最新迭代里完善了主页的“关于我们”内容、搭建隐私/条款/安全/联系等信息页，给登录注册页补齐返回主页、底部真实链接、找回密码流程，并实现 Forgot Password 的密码重置逻辑；同步为注册接口增加用户名唯一校验 API 与前端实时提示。
- 构建数据库初始数据集并完成全流程功能测试，确保新加的路由、API 和模板在真实 MySQL 环境下稳定运行。

### 任务难点与解决方法
- **ORM 向 SQL 改写成本高**：原有视图大量依赖 Django ORM，直接更换数据库后查询语句需完全重写。通过 `Project/db_utils.py` 抽取查询接口和 `quote_table`，在 `customer/views.py`、`merchant/views.py` 等模块逐段迁移，同时用 `get_*_by_user` 保证用户-角色映射逻辑一致。
- **跨端数据结构保持稳定**：模板仍然期望 ORM 对象的字段结构。迁移过程中在视图侧构造与原有对象一致的 `dict`，如 `_build_order_context`/`_build_order_payload` 保证前端 JS 无需改动即可读取字段。
- **评分逻辑需要兼顾准确性与易用性**：需要限制评分范围并实时更新商家、餐品、平台、骑手四类实体的平均分。新增 `_normalize_rating`、`_update_entity_rating`、`_format_decimal` 等工具函数，并在 `rate_order` API 中串联插入 `order_rating` 与四张实体表的累计字段，确保并发下仍能计算正确的平均值。
- **前端交互复杂**：新增评分入口、弹窗、表单验证与结果展示必须融入原有 UI。通过在模板中引入评分 summary、模态框和 `rate-order-btn` 触发逻辑，并在 JS 里复用已有的模态管理函数，保证体验一致。
- **多页面联动与 Debug**：在补齐 About/Terms/Privacy 等信息页过程中，需要将视图配置与模板中的字段结构对齐（例如修正 `items` 字段导致的 tuple 渲染问题），并针对登录/注册/找回密码多页面的链接跳转、消息提示和 API 调用逐一调试，确保体验连续。

### 任务完成结果
- 所有视图已成功使用原生 SQL 对接新的 1357 库，`MODIFICATION_LOG.md` 对改动进行了快照记录，后续排查与扩展有据可依。
- 顾客端可以查看各商家/餐品/平台/骑手的实时评分，并在订单完成后弹出评分窗口，评分结果会立即反映在列表、详情及推荐区域。
- 站点新增了信息页体系、忘记密码流程、用户名去重校验、主页说明等功能，用户可从登录/注册页快速返回主页，条款/隐私/安全/联系链接指向真实页面，忘记密码可通过姓名+电话验证后更新数据库密码。
- 完成数据库数据的构建与功能测试，验证了注册→登录→忘记密码→信息页跳转的全链路在新环境下稳定可用。

### 收获与体会
- 深入掌握了 Django 原生游标的使用与 SQL 参数化写法，对如何在保持模板契约的前提下渐进式迁移 ORM 有更清晰的方法论。
- 评分系统的落地让我熟悉了「后端计算—前端交互」闭环的设计流程，也强化了对数据校验和错误回退的重视。
- 通过补齐信息页、忘记密码、用户名校验等细节，体会到统一 UX 和后端逻辑的重要性，Debug 过程中也更加熟练地使用 Django 消息、session 提示以及模板循环调试技巧。
