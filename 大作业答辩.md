# 大作业答辩

## 一、分工

杨泽南：负责需求讨论、系统设计文档、核心数据表搭建，以及重要后端接口/SQL 的实现与联调。（50%）

李宗欣：负责需求讨论、评分与订单系统实现、大部分客户端接口/SQL，以及系统实现报告撰写和测试。（50%）

## 二、数据库设计

核心实体：

- 餐品（餐品号、名称、价格、类型、评分次数、评分）
- 商家（商家号、名称、电话、地址、评分次数、评分）
- 平台（平台号、名称、电话、评分次数、评分）
- 骑手（骑手号、名称、电话、评分次数、评分）
- 顾客（顾客号、名称、电话、地址）
- 折扣（折扣号、折扣率）

关键联系：

- 供应：商家与餐品之间的一对多关系
- 入驻请求：商家与平台的状态关系
- 签约请求：平台与骑手的状态关系
- 适用：商家-平台-折扣的多对多关联
- 下单：顾客-平台-商家-餐品-折扣-骑手之间的订单记录（含价格、状态）

## 三、系统架构

- 整体基于 Django 框架搭建。Django 本身已经把 Web 应用的基本骨架（请求路由、视图控制器、模板引擎、ORM/数据库访问、会话与权限等）全部封装好了，我们只需遵循它的约定来填充业务。

  - 在这个框架里，浏览器的请求先由全局路由 urls.py 分发到对应 app 的视图函数。视图函数编写后端逻辑：读取参数、调用 db_utils 执行 SQL、校验状态，最后返回 HTML 或 JSON。
  - 前端界面放在各 app 的 templates/ 中，使用 Django 模板语法渲染变量，再配合页面内的 JavaScript 调接口即可。
  - 因为 Django 已经提供了模型层、会话管理、CSRF 防护等基础设施，我们无需手动重构系统架构，主要精力都投入在“写前端页面 + 写后端业务逻辑”上，从而快速完成多角色的业务闭环。

## 四、前后端设计

前端：我们直接使用 Django 模板编写 HTML，不额外引入复杂框架。顾客、商家、骑手、平台各自拥有独立的模板和样式，搭配少量原生 JavaScript 进行导航切换、表单收集、`fetch` 调用，实现“模板负责展示、JS 负责局部刷新”的轻量方案，结构清晰且易于演示。

后端：所有业务逻辑集中在各 app 的视图函数。请求到达后先做身份校验，再通过 `db_utils` 执行查询或写入，完成商家入驻、顾客下单、骑手接单、平台审批等流程，并将结果以 HTML 或 JSON 返回。依托 Django 的登录、Session、CSRF 等内建能力，我们无需重复造轮子，可以专注于业务实现。

## 五、亮点

- 多角色一体化身份体系：借助 `UserProfile` 与信号机制自动同步四类角色，一个账号即可切换不同控制台并保持数据一致，展示系统完整性与可维护性。
- 原生 SQL + 工具封装：把常用 SQL 以函数形式拆分在各业务模块中，既保留原生 SQL 的灵活性，又做到一处修改全局生效
- 完整业务闭环：从注册、入驻、折扣、下单、接单、审批到评分全部打通，可直接演示“平台审批→商家发布→顾客下单→骑手接单→顾客评分”的真实流程。
- 差异化折扣与评分体系：商家可针对不同平台配置折扣，顾客完成订单后可分别评价商家/餐品/平台/骑手，体现我们对精细化运营和服务质量的关注。
- 轻量但精致的前端：仅用模板 + 原生 JS 即实现多角色仪表盘、模态与状态筛选，说明我们在有限时间内兼顾了体验与效率。
